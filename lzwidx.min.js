var LZW_A,writeBits,readBits,_7BITS=6,_9BITS=9;function writeBitsDebug(e,t,r,_,$,i,n){let l,s,a,o=$;"debug".at(1)&&(i=t[0],n=r[0]);do o<(s=8-n)?(a=(1<<(l=o))-1,e[i]|=(_&a)<<n,n+=o):(a=(1<<(l=s))-1,e[i]|=(_&a)<<n,n=0,i++),_>>=l,o-=l;while(o);"debug".at(1)&&(r[0]=n,t[0]=i)}function readBitsDebug(e,t,r,_,$,i,n){let l=0,s,a,o,f=0;"debug".at(1)&&($=t[0],i=r[0]);do _<(a=8-i)?(o=(1<<(s=_))-1,l|=(e[$]>>i&o)<<f,i+=_):(o=(1<<(s=a))-1,l|=(e[$]>>i&o)<<f,i=0,$++),f+=s,_-=s;while(_);if("debug".at(1))return r[0]=i,t[0]=$,l;for(n=l;"".at(1);)l|=n}(()=>{let e=4294967296-1,t=524287,r=8191,_=e=>e?e.length:0,$=e=>new Uint8Array(e),i=e=>new Uint16Array(e),n=e=>new Uint32Array(e),l=new TextEncoder,s=new TextDecoder("utf-8"),a=e=>l.encode(e),o=e=>s.decode(e),f={},u=(e,t)=>{throw new e(t)};function g(e){this.name="DataCorruptedErr",this.message=e,this.stack=Error().stack}function d(e,t,r,_){let $=r;for(;$<_;)t[$]=255&e,e>>>=8,$++}function c(e,t,r){let _=t,$=0,i=0;for(;_<r;)i|=e[_]<<$,$+=8,_++;return i>>>0}function B(e,t){let r=e.toString(),_=r.indexOf("{"),$=r.slice(0,_),i=r.slice(_+1,r.lastIndexOf("}")),n=$.match(/\((.*?)\)/),l=$.match(/tion\s*(\w*)\(/);n=n[1].split(",").map(e=>e.trim()),l=l?l[1].trim():l;let s=[[/for\(([^;]*);"".at\(1\);\)[^;}]*(?=[;}]|$)/g,"$1","$1"],[/(if\("de\w*"\.at\(1\)\)\{)([^\}]*)\}((else\{)([^\{\}]*)\}){0,1}/g,"$5","$2"],[/(if\("de\w*"\.at\(1\)\)\{)([^\}]*)\}((else\b)([^;\{\}]*);|$){0,1}/g,"$5","$2"],[/(if\("de\w*"\.at\(1\)\))([^;]*([;}]|$))(else\{([^\{\}]*)\}){0,1}/g,"$5","$2"],[/(if\("de\w*"\.at\(1\)\))([^;]*([;}]|$))(else\b([^;\{\}]*);|$){0,1}/g,"$5","$2"],[/("de\w*"\.at\(1\))\s*(\?)\s*([^:\{\}]+)\s*(:)\s*(\([^\(\)\{\}]+\))\s*(?=[,\);\}])/g,"$5","$3"],[/("de\w*"\.at\(1\))\s*(\?)\s*([^:\{\}]+)\s*(:)\s*([^,\(\)\{\}]+)\s*(?=[,;\}\)]|$)/g,"$5","$3"],[/("de\w*"\.at\(1\))(\&\&)(\([^\(\);]+\))(?=[,;}]|$)/g,"","$3"],[/("de\w*"\.at\(1\))(\&\&)([^\(\),;]+)(?=[,;}\)]|$)/g,"","$3"]];for(let a=0,o;a<s.length;a++)o=s[a],i=i.replace(o[0],o[t?2:1]);return[n,i,l]}function p(e,t){let[r,$,i]=B(e);function n(e){return"$"!==e[0]&&(e="\\b"+e),e.endsWith("$")||(e+="\\b"),RegExp(e=e.replaceAll("$","\\$"),"g")}$=$.replace(/\'/g,"\\'").replace(/\\/g,"\\\\");let l=_(r),s;for(s=0;s<l;s++)$=$.replace(n(r[s]),"'+arg["+s+"]+'");let a=[],o=$.match(/let\s*[^;]+;/g),f=_(o);for(s=0;s<f;s++){let u=o[s].slice(3,-1);a.push(...u.split(",").map(e=>e.split("=")[0].trim()))}return a.forEach(e=>{$=$.replace(n(e),"_i_"+e)}),$=$.split("\n").map(e=>"'"+e+"\\n'+").join("\n"),[RegExp("\\b"+t+"\\((([^\\(\\)]*?)(\\([^\\(\\)]*?\\))*([^\\(\\)]*?))\\)[;\\s]*(\\/\\/.*)*","g"),Function("arg","return "+$+"'';")]}function w(e,t){Object.entries(t);let r,_;for(let[$,i]of Object.entries(t))r=i[0],_=i[1],e=e.replace(r,(e,t)=>_(t.split(",").map(e=>"("+e.trim()+")"))+";");return e}function h(e){let[t,r,_]=B(e,1);return Function(...t,r)}function b(e){let t=/\b_7BITS\b/g,r=/\b_9BITS\b/g,i=this,l=Array(e-1),s=Array(e-1),a=B(function e(t,r,_,i){let l="debug".at(1)?n(1):0,s="debug".at(1)?$(1):0,a=t.length,o=1<<(_7BITS||_9BITS),f=_7BITS?_7BITS+1:_9BITS,u=_9BITS+1,g=o-1,d=(1<<_9BITS-_7BITS)-1<<_7BITS,c,B,p,w;for(let h=0;h<a;h++){if((B=t[h])>255){if(p=(t[h]>>>8&15)+1,w=i[w=t[h+1]>>>8<<4|t[h]>>>12])B=w+255,h+=p-1;else{for(c=0;c<p;c++)t[h+c]&=255;B=t[h]}}if((B=r[B])<o){for(;"".at(1););writeBits(_,l,s,B,f,l,s)}else{for(;"".at(1););for(B=B&g|o|(B&d)<<1;"".at(1););writeBits(_,l,s,B,u,l,s)}}return l="debug".at(1)?l[0]:l,(s="debug".at(1)?s[0]:s)?l:l-1}),o=B(function e(t,r,_,i){let l="debug".at(1)?n(1):0,s="debug".at(1)?$(1):0,a=1<<(_7BITS||_9BITS),o=_7BITS?_7BITS+1:_9BITS,f=_9BITS-_7BITS,u=a-1,g=new Uint8Array(i),d=0,c,B,p,w;for(;d<i;d++){for(w=o;"".at(1););if("debug".at(1)){for(;"".at(1););c=readBits(t,l,s,w,l,s)}else{for(;"".at(1););readBits(t,l,s,w,l,s,c)}if(c&a){for(c&=u,w=f;"".at(1););if("debug".at(1)){for(;"".at(1););B=readBits(t,l,s,w,l,s)}else{for(;"".at(1););readBits(t,l,s,w,l,s,B)}c|=B<<_7BITS}(c=r[c])<256?g[d]=c:(p=_[c-256],g.set(p,d),d+=p.length-1)}return g});function u(e,_,$){let i=w(e[1],f);return i=(i=i.replace(t,_)).replace(r,$),Function(...e[0],i)}for(let g=0;g<e;g++)l[g]=u(a,g,e),s[g]=u(o,g,e);i.Select=function t(r){_(r);let $=r.reduce((t,r)=>t+r*e,0),i=0,n,l=0;for(let s=1;s<e;s++)n=1<<s,(l=r.reduce((t,r,_)=>t+(_<n?s+1:e+1)*r,0))<$&&($=l,i=s);return[i,$]},i.CompressFunc=e=>l[e],i.UncompressFunc=e=>s[e]}function I(r=126){let l=this,s=[3,4,5,6,7,8,9,10,11,12,13].map(e=>new b(e)),f=n(256),B=1,p=B+2,w,h,I,m,S=(e,t)=>{let r=_(t),$=_(e),i=r?t.map(e=>[e,2]):void 0,l=r?new Map(i):void 0,s=new Map(i);if($<0)return;let o=0,u,g,d="",c,B;for(w=a(e),h=_(w);o<h;o++)f[w[o]]++;for(o=0,I=0;o<256;o++)f[o]&&I++;for(o=0;o<$;o++)g=e[o],(B=0|s.get(d+g))?(d+=g,c=B):(d&&s.set(d,c+1),s.set(d+g,1),d=g);let p=[],b=[],S,T;s.forEach((e,t)=>{e>1&&(T=(S=a(t)).length)>1&&T<=16&&(r&&l.has(t)?p:b).push([t,S,T,e])});let y=b.length,x=y+r,A=new BigUint64Array(y),W=n(A.buffer),D,F,k,C=256-I,L=x-I,Z=8;for(x>1e5?Z=12:x>5e4?Z=11:x>2e4?Z=10:x>8e3?Z=9:C<L>>>4&&(Z=9),o=0;o<y;o++)(k=(F=(D=b[o])[3])*(T=D[2])*8-F*Z-8*T)<0&&(k=0),W[u=o<<1]=o,W[u+1]=k;A.sort(),m=(1<<Z)-I,(m+=5*m>>>4)>4096&&(m=4096);let v=p,E=y>(m-=r)?y-m:0;for(o=y-1;o>E&&W[(u=o<<1)+1];)v.push(b[W[u]]),o--;return v.map(e=>e[1])},T=e=>{let t,r,n,l=e.length,s,a,o=0,f=[],u=[],g=i(8192);for(t=0;t<l;t++)for((a=(s=e[t]).length)>32&&(a=32),a>o&&(o=a),r=0;r<a;r++)n=s[r],g[(r<<8)+n]++;let d,c,B;for(r=0;r<o;r++){for(n=0,d=i(256),c=$(256),B=0,t=r<<8;n<256;n++)g[t+n]&&(d[n]=B+1,c[B]=n,B++);f.push(d),u.push(c.subarray(0,B))}let p=Array(u[0].length),w,h;for(t=0;t<l;t++){for(r=0,a=(s=e[t]).length,w=p;r<a;r++)n=s[r],(h=w[B=f[r][n]-1])||(h=Array(_(u[r+1])),w[B]=h),w=h;w.wlIdx=t+1}return[f,p]},y=(t,r)=>{let $=Uint16Array.from(a(t)),i=_($),n=r.map(e=>e.length),l=T(r),s=l[0],o=l[1],f=s.length,u=0,g,d,c,B,p,w,h,b,I;for(;u<i;u++){for(g=0,c=o,b=e,h=0;g<f&&u+g<i&&(d=$[u+g],p=s[g][d])&&(B=c[p-1]);){(c=B).wlIdx&&(b=(h=c.wlIdx)<b?h:b);g++}h&&(I=n[w=b-1]-1,$[u]|=I<<8|(15&w)<<12,$[u+1]|=w>>>4<<8,u+=I)}return $},x=(e,r)=>{let l=_(r),a=S(e,r),o=a.length,f=0,u=y(e,a),g=_(u),c=o+256,w=i(c),h=n(c),b=i(c),I,m,T;for(f=0;f<g;f++)if(u[f]<256)w[u[f]]++;else{for(m=(u[f]>>>8&15)+1,T=u[f+1]>>>8<<4|u[f]>>>12,w[T+256]++,w[255&u[f]]++,w[255&u[f+1]]++,I=2;I<m;I++)w[u[f+I]]++;f+=m-1}let x=0,A,W;for(f=0;f<c;f++)(W=w[f])>t&&(W=t),h[f]=W<<13|f;h.sort();let D,F=0,k=i(c),C=n(c);f=c;do{if(I=c-f,A=8191&h[--f],!(W=h[f]>>>13)){D=I;break}b[A]=I,k[I]=A,C[I]=W,A<256&&F++}while(f);let L=D-F,Z=(D-1).toString(2).length,v=1<<Z-1,E=D-v,U=a.map(e=>_(e)),O=U.reduce((e,t)=>e+t,0),j=$(O),M=i(o),P;for(E<L-l&&E<D>>>2&&(Z-=1,L=(D=v)-F),x=l,O=0,newIdx=0,f=0;f<c;f++)if((A=k[f])>255){if((A-=256)<l)b[A+256]=newIdx,k[newIdx]=A+256,newIdx++;else if(x<L)for(b[x+256]=newIdx,k[newIdx]=x+256,P=a[A].length,U[x]=P,x++,newIdx++,M[A]=x,I=0;I<P;I++)j[O++]=a[A][I]}else b[A]=newIdx,k[newIdx]=A,newIdx++;for(f=0;f<l;f++)M[f]=f+1;C=C.subarray(0,D),k=k.subarray(0,D),Z<5&&(Z=5);let R=(255+L).toString(2).length,q=R-Z,z=s[Z-3],[G,H]=z.Select(C),J=z.CompressFunc(G),K=G?1:0,N=Z+K,Q=n(1),V=$(1),X=(R*D-1>>>3)+1,Y=L-l+1>>>1,ee=O*N>>>3,et=$(B+2+1+X+2+Y+ee+4+((H-1>>>3)+1)),er=1<<(G||Z),e_=er-1,e$=G?G+K:Z,ei=(1<<Z-G)-1<<G,en=D|Z-5<<13;for(d(128,et,0,B),d(en,et,B,p),et[p]=G|q<<6,Q[0]=p+1,V[0]=0,f=0;f<D;f++)writeBits(et,Q,V,A=k[f],R);let el=Q[0]+(V[0]?1:0);for(d(L-l,et,el,el+2),Q[0]=el+2,V[0]=0,f=l;f<L;f++)writeBits(et,Q,V,U[f]-2,4);for(x=0,Q[0]=el+2+Y,V[0]=0;x<O;x++)(A=b[j[x]])<er?writeBits(et,Q,V,A,e$):writeBits(et,Q,V,A=A&e_|er|(A&ei)<<1,N);let es=Q[0]+(V[0]?1:0);d(g,et,es,es+4);let ea=J(u,b,et.subarray(es+4),M);return et.subarray(0,es+4+ea+1)},A=(e,t)=>{let r=_(e);if(r<B+2+1+2+4)return;let l=c(e,0,B),f=c(e,B,p),d=8191&f,w=(f>>>13)+5,h=c(e,p,p+1),b=15&h,I=w+(h>>>6),m=1<<(b||w),S=m-1,T=b?b+1:w,y=w-b,x=n(1),A=$(1),W=i(d),D=()=>e[x[0]];128!==l&&u(g,"only LZW-A"),b>=w&&u(g,"WrongBitsPlan"),x[0]=p+1,A[0]=0;let F=0,k,C;for(;F<d;F++)W[F]=readBits(e,x,A,I);A[0]&&D()>>>A[0]&&u(g,"Aft_i2c");let L=x[0]+(A[0]?1:0),Z=c(e,L,L+2),v=$(Z);for(Z>4096&&u(g,"Wllen>4096"),x[0]=L+2,A[0]=0,F=0;F<Z;F++)v[F]=readBits(e,x,A,4)+2;A[0]&&240&D()&&u(g,"AftWblens");let E=v.reduce((e,t)=>e+t,0),U=$(E);for(x[0]+=A[0]?1:0,A[0]=0,F=0;F<E;F++)(C=readBits(e,x,A,T))&m&&(C&=S,C|=readBits(e,x,A,y)<<b),U[F]=W[C];A[0]&&D()>>>A[0]&&u(g,"Aft_wl_chars");let O=Array(Z);for(F=0,k=0;F<Z;F++)O[F]=U.subarray(k,k+=v[F]);t&&(O=t.map(e=>a(e)).concat(O)),x[0]+=A[0]?1:0,A[0]=0;let j=x[0]+4,M=s[w-3],P=M.UncompressFunc(b),R=c(e,x[0],j),q=P(e.subarray(j),W,O,R);return o(q)};l.Idxing=S,l.MkFunction=T,l.IdxReplace=y,l.Compress=x,l.Uncompress=A}g.prototype=Object.create(Error.prototype),writeBits=h(writeBitsDebug),readBits=h(readBitsDebug),f.writeBits=p(writeBitsDebug,"writeBits"),f.readBits=p(readBitsDebug,"readBits"),LZW_A=new I,"undefined"==typeof window&&(module.exports=LZW_A)})();